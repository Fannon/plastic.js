/*! plastic - v0.0.1 - 2014-04-15
* https://github.com/Fannon/plasticjs
* Copyright (c) 2014 Simon Heimler; Licensed MIT */
var plastic=function(){$(document).ready(function(){console.log("plastic.js version: "+plastic.version),plastic.$elements=$("plastic"),plastic.$elements.each(function(){d($(this)),a($(this))})});var a=function(a){var c={},d=!1;if(console.info("main.getPlasticData(el)"),c.dataUrl=a.attr("data-url"),c.dataUrl){d=!0;{$.ajax(c.dataUrl).done(function(a){console.log("getJSON from URL"),console.log(a),c.rawData=$.parseJSON(a),console.log("Received asynchronous data."),b(c)}).fail(function(){console.error("error")}).always(function(){})}}else{var e=a.find(".plastic-data");if(e.length>0){var f=e[0].text;console.log(f),f&&""!==f?c.rawData=$.parseJSON(f):console.log("Empty Element!")}else console.log("No Data Object")}var g=a.find(".plastic-options");if(g.length>0){var h=g[0].text;h&&""!==h?c.options=JSON.parse(h):console.log("Empty Element!")}else console.log("No Options Object");c.height=a.height(),c.width=a.width(),d||(console.log("Received Synchronous Data"),b(c))},b=function(a){console.info("PARSING DATA"),console.dir(a);var b=plastic.dataParser.available[a.options.dataFormat];a.data=plastic.dataParser[b](a.rawData),c(a)},c=function(a){var b=plastic.display.available[a.options.display];plastic.display[b](a)},d=function(a){console.info("PREPARING VISUALISATION"),a.append('<div id="vis"></div>'),$("#vis").height(a.height()).width(a.width()).css("overflow","scroll").css("padding","5px")};return{version:"0.0.2",$elements:[],dataParser:{available:{}},queryParser:{available:{}},display:{available:{}},helper:{}}}();plastic.options={test:1},plastic.dataParser.available["sparql-json"]="sparqlJson",plastic.dataParser.sparqlJson=function(a){console.info("PARSING DATA VIA: SPARQL JSON"),console.dir(a);for(var b=[],c=0;c<a.results.bindings.length;c++){b[c]={};var d=a.results.bindings[c];for(var e in d)b[c][e]=d[e].value}return console.dir(b),b},plastic.display.available.table="table",plastic.display.table=function(a){console.info("DISPLAY MODULE: TABLE"),console.dir(a);var b=a.data,c=d3.select("#vis"),d=c.append("table"),e=d.append("thead"),f=d.append("tbody"),g=[];for(var h in b[0])b[0].hasOwnProperty(h)&&g.push(h);e.append("tr").selectAll("th").data(g).enter().append("th").text(function(a){return a});{var i=f.selectAll("tr").data(b).enter().append("tr");i.selectAll("td").data(function(a){return g.map(function(b){return{column:b,value:a[b]}})}).enter().append("td").html(function(a){return a.value})}return d},plastic.helper.log=function(a,b){console.log(a+" :: "+b)},plastic.queryParser.sparql=function(){};